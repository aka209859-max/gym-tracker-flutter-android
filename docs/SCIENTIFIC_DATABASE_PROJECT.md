# 📊 GYMMATCH 科学的根拠データベース統合プロジェクト

## 🎯 プロジェクト目的

**40本以上の査読付き論文に基づく科学的根拠データベース**を活用し、GYMMATCHに以下の2つの革新的AI機能を実装する：

1. **AI成長予測機能** - ユーザーの現在の筋力から将来の成長を予測
2. **トレーニング効果分析機能** - 最適な頻度・ボリューム・休息日数を提案

これにより**hacomono（AI機能なし）**と**筋トレMEMO（記録のみ）**から完全差別化を実現する。

---

## 📚 科学的根拠データベース（7テーマ・40本以上の論文）

### テーマ1：筋力向上率の基準値

**初心者（0-6ヶ月）**：
- 月+15-25%の筋力向上
- 根拠：ACSM 2009 Position Stand
- 上半身（女性）：週+7.2%（Jung 2023, n=100, ES=1.34）

**中級者（6-24ヶ月）**：
- 月+5-10%の筋力向上
- 負荷増加：ACSM 2-10%ルール（週2%推奨）

**上級者（24ヶ月以上）**：
- 月+1-3%の筋力向上
- プラトー期が頻発
- DUP（Daily Undulating Periodization）が効果的（Williams 2017, ES=0.68）

**重要な発見**：
- 「ノンレスポンダー」は存在しない（Pickering & Kiely 2019）
- プログラムのミスマッチが原因

---

### テーマ2：最適トレーニング頻度

**決定的研究**：Grgic et al. 2018（メタ分析、n=25研究）

**結論**：
- **ボリュームが王様、頻度は手段**
- ボリューム統制条件：有意差なし（p=0.421）
- ボリューム非統制条件：
  - 週1回：ES=0.74
  - 週2回：ES=0.88
  - 週3回：ES=1.03
  - 週4回以上：ES=1.08

**部位別効果**：
- 上半身：高頻度が有利（p=0.004）
- 下半身：頻度差小（p=0.16）

**実用的推奨**：
- 初心者：週2回（回復時間確保）
- 中級者：週3回（ボリューム増加）
- 上級者：週4-6回（高ボリューム達成手段）

---

### テーマ3：プラトー期の定義と対策

**定義**：
- 3-4週間の成長停滞
- 同一重量・回数が連続
- Kraemer & Ratamess 2004

**対策A：高度なテクニック**（Krzysztofik 2019）
- ドロップセット：ES=0.69
- クラスターセット：力発揮維持
- レストポーズ：ボリューム増加

**対策B：ディロード**（Bell et al. 2023）
- ボリューム30-50%削減
- 強度は維持（重量減らさない）
- 期間：1-2週間
- 効果：スーパーコンペンセーション

**対策C：ピリオダイゼーション変更**
- リニア型 → DUP型
- ボリューム重視 → 強度重視
- 種目変更（角度・器具）

---

### テーマ4：推奨トレーニングボリューム

**決定的研究**：Schoenfeld et al. 2017（メタ分析）

**基本法則**：
- セット追加ごとに**+0.37%の成長**
- 用量反応関係（dose-response relationship）

**レベル別推奨ボリューム**（週あたり/部位）：

**初心者**：
- 10-12セット/週
- 根拠：Baz-Valle 2022

**中級者**：
- 12-16セット/週
- 上半身：14-18セット推奨

**上級者**：
- 16-20セット/週
- 上腕三頭筋：最大24セットまで効果あり（例外的）
- 20セット超：収穫逓減（diminishing returns）

**重要な発見**：
- 最低4セット/週は必要（維持レベル）
- 最大効率点：15-18セット/週
- 20セット超：疲労 > 成長

---

### テーマ5：最適休息日数

**筋タンパク質合成（MPS）の科学**：
- MPS上昇期間：48時間（Davies et al. 2024）
- トレーニング刺激後24時間でピーク
- 48時間で正常値に戻る

**部位別推奨休息**：

**大筋群（胸・背中・脚）**：
- 48-72時間
- 根拠：筋損傷が大きい、回復に時間

**小筋群（肩・腕・腹筋）**：
- 24-48時間
- 根拠：筋損傷が小さい、回復が早い

**レベル別考慮**：
- 初心者：+12-24時間（神経系適応中）
- 上級者：標準値（効率的回復能力）

**実用的推奨**：
- 同一部位：最低48時間空ける
- 高頻度トレーニング：部位分割必須
- 全身トレーニング：48-72時間空ける

---

### テーマ6：推奨トレーニング強度

**筋力向上の閾値**：
- **>60% 1RM 必須**（Schoenfeld et al. 2017）
- 60%未満：筋力向上効果小

**筋肥大の柔軟性**：
- **あらゆる強度で筋肥大可能**
- 条件：限界近くまで追い込む（near-failure）
- 30% 1RM でも効果あり（疲労まで）

**限界トレーニングの効果**（Grgic et al. 2022, n=15研究）：
- 全体効果：ES=0.15（小さいが有意）
- **上級者ほど効果大**
- 初心者：必ずしも必要なし

**RIR（Reps In Reserve）の活用**：
- 初心者：RIR 3-4（余裕残す）
- 中級者：RIR 1-2（限界近く）
- 上級者：RIR 0-1（限界まで）

**実用的推奨**：
- 筋力目標：70-85% 1RM、3-6回
- 筋肥大目標：60-80% 1RM、8-12回
- 筋持久力目標：50-60% 1RM、15-20回

---

### テーマ7：年齢・性別・遺伝要因

**年齢の影響**（Peterson et al. 2010, メタ分析）：
- **50歳以上でも+29%のレッグプレス向上**
- 高齢者：強度より頻度・ボリューム重視
- 回復時間：+24時間考慮

**性別の影響**（Roberts et al. 2020, 決定的メタ分析）：
- **女性は男性より上半身の相対的筋力向上率が高い**
- 効果量：ES=-0.60（女性有利、p=0.002）
- 下半身：性差なし（p=0.85）
- 重要：絶対値でなく**相対的向上率**

**遺伝的要因**（Pickering & Kiely 2019）：
- 「ノンレスポンダー」は存在しない
- プログラムとのミスマッチが原因
- 個人差：3-10倍（Hubal 2005）
- 対策：プログラム変更で全員が反応

**実用的推奨**：
- 年齢・性別問わず**全員が成長可能**
- 女性：上半身トレーニングを重視
- 高齢者：回復時間を長めに設定
- 停滞時：プログラム変更（遺伝のせいにしない）

---

## 🎯 実装する機能

### 機能1：AI成長予測（Growth Prediction）

**ユーザー入力**：
- 現在の1RM（例：ベンチプレス60kg）
- トレーニング歴（初心者/中級者/上級者）
- トレーニング頻度（週2-6回）
- 性別・年齢

**AI出力例**：
```
【あなたの成長予測】

現在：ベンチプレス 60kg
4ヶ月後：78kg（+30%）

科学的根拠：
- 初心者は月+15-25%成長（ACSM 2009）
- 週3回トレーニング：ES=1.03（Grgic 2018）
- 女性の上半身：週+7.2%（Jung 2023）

信頼区間：75-81kg
（個人差を考慮、Hubal 2005）

推奨アクション：
✓ 週2%の負荷増加（ACSM 2-10%ルール）
✓ 週14-16セット実施
✓ 48-72時間の休息確保
```

---

### 機能2：トレーニング効果分析（Training Effect Analysis）

**分析項目**：
1. **現在のボリューム評価**
2. **最適頻度の提案**
3. **回復時間の最適化**
4. **プラトー検出と対策**

**AI出力例**：
```
【大胸筋のトレーニング効果分析】

現在の状況：
- 週12セット実施中
- 週2回のトレーニング
- 最終4週間：60kg→62kg（+3.3%）

科学的評価：
⚠️ ボリューム不足
- 推奨：週14-16セット（Baz-Valle 2022）
- 期待効果：セット追加で+0.37%成長（Schoenfeld 2017）

✓ 頻度は適切
- 週2回で48-72時間の回復時間確保

推奨アクション：
1. 週2セット追加（14セットに増量）
2. インクラインプレスを追加（上部刺激）
3. 次回負荷増加：62kg→63kg（+1.6%、週2%ルール）
```

---

## 🛠️ 実装計画

### Phase 1：AIサービス基盤構築（1日目）

**ファイル1**：`/lib/services/ai_prediction_service.dart`
- Gemini 2.0 Flash APIと連携
- 科学的データベースをシステムプロンプトに統合
- ユーザーデータ（1RM、歴、頻度）を収集
- 成長予測ロジック実装
- 信頼区間計算（個人差考慮）

**ファイル2**：`/lib/services/training_analysis_service.dart`
- 部位別ボリューム追跡
- プラトー検出システム（4週間停滞チェック）
- 回復時間計算機（レベル・部位別）
- 頻度最適化推奨

**ファイル3**：`/lib/services/scientific_database.dart`
- 7テーマの科学的根拠データを構造化
- 引用文献管理
- AI プロンプト生成用フォーマット

---

### Phase 2：UI実装（2日目）

**画面1**：`/lib/screens/prediction/growth_prediction_screen.dart`
- 成長予測グラフ（現在→4ヶ月後）
- 信頼区間の視覚化
- 科学的根拠の表示（折りたたみ式）
- 推奨アクションリスト

**画面2**：`/lib/screens/analysis/training_effect_analysis_screen.dart`
- 部位別ボリューム表示
- 最適ボリュームとの比較
- プラトー警告表示
- 頻度・回復時間の最適化提案

**共通コンポーネント**：
- 科学的引用カード（論文名・著者・年・ES値）
- 信頼度インジケーター（論文数に基づく）

---

### Phase 3：AI Coachへの統合（3日目）

**既存ファイル**：`/lib/screens/workout/ai_coaching_screen.dart`

**追加機能**：
1. **科学的根拠の追加**
   - メニュー生成時に引用文献を表示
   - 例：「根拠: Grgic et al. 2018 メタ分析」

2. **レベル別最適化**
   - 初心者：ボリューム控えめ、フォーム重視
   - 中級者：ボリューム増加、バリエーション
   - 上級者：高ボリューム、高度なテクニック

3. **プラトー対策の自動提案**
   - 4週間停滞検出時に自動で対策メニュー生成
   - ディロード週の自動提案

---

## 📊 差別化ポイント

### vs hacomono
- ❌ hacomono：AI機能なし
- ✅ GYMMATCH：科学的根拠に基づくAI予測 + 分析

### vs 筋トレMEMO
- ❌ 筋トレMEMO：記録のみ（分析なし）
- ✅ GYMMATCH：記録 + 予測 + 最適化提案

### 独自の強み
- ✅ 40本以上の査読付き論文が裏付け
- ✅ 個人差を考慮した信頼区間表示
- ✅ リアルタイムでプラトー検出
- ✅ 性別・年齢・レベル別の最適化

---

## 🎯 戦略的インパクト

**ARR ¥10M達成への貢献**：
1. **プレミアム価格の正当化**
   - 科学的根拠 = 高付加価値
   - ¥19,800/月の価値証明

2. **競合からの完全差別化**
   - hacomonoの6機能 vs GYMMATCHの10機能
   - AI予測・分析は他社にない独自機能

3. **ユーザー継続率向上**
   - 成長予測 = モチベーション維持
   - 科学的根拠 = 信頼性向上

4. **口コミ・バイラル効果**
   - 「予測が当たった！」体験がシェアされる
   - 科学的アプローチが話題性を生む

---

## 🚀 次のステップ

### 今日（1日目）
1. ✅ `/lib/services/ai_prediction_service.dart` 作成
2. ✅ `/lib/services/training_analysis_service.dart` 作成
3. ✅ `/lib/services/scientific_database.dart` 作成
4. ✅ Gemini APIとの統合テスト

### 明日（2日目）
5. ✅ 成長予測画面UI実装
6. ✅ トレーニング効果分析画面UI実装
7. ✅ データ可視化コンポーネント作成

### 明後日（3日目）
8. ✅ AI Coachへの科学的根拠統合
9. ✅ プラトー対策の自動提案実装
10. ✅ 全機能の統合テスト

---

## 📝 技術スタック

- **AI Engine**: Gemini 2.0 Flash API
- **Database**: Firebase Firestore (training history, 1RM records)
- **UI Framework**: Flutter 3.35.4
- **State Management**: Provider
- **Data Visualization**: Flutter Charts (growth curves, confidence intervals)
- **Scientific Database**: 構造化された40本の論文データ

---

**保存日**: 2025年X月X日
**プロジェクトコード**: SCIENTIFIC_DATABASE_PROJECT
**優先度**: 🔴 最高（hacomono差別化の鍵）
**実装期間**: 3日間
**期待ROI**: ARR ¥10M達成への直接貢献
