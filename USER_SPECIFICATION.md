# GYM MATCH - 完全仕様書

**バージョン**: 1.0.40  
**最終更新**: 2025年11月20日

---

## 📱 アプリ概要

**GYM MATCH**は、トレーニング記録・ジム検索・混雑度確認・AI分析を統合した次世代フィットネスアプリです。

---

## 🎯 現在の実装機能

### 1. トレーニング記録管理

#### 1.1 ワークアウト記録
- **セット単位の詳細記録**: 重量、レップ数、セット種別（通常/ウォームアップ/スーパーセット/ドロップセット/失敗セット）
- **筋肉部位選択**: 胸、背中、脚、肩、腕、腹筋、有酸素など14部位
- **運動種目選択**: 各部位ごとに専用種目（ベンチプレス、スクワット、デッドリフトなど）
- **カスタム種目作成**: ユーザー独自の運動種目を追加可能
- **メモ機能**: 各セッションにメモを記録
- **テンプレート機能**: よく行うワークアウトをテンプレート保存して再利用

#### 1.2 履歴管理
- **ワークアウト履歴一覧**: 日付別の記録表示
- **詳細表示**: 各セッションの完全な記録確認
- **編集・削除**: 過去の記録を修正・削除可能
- **カレンダー表示**: トレーニング実施日を視覚的に確認

#### 1.3 パーソナルレコード管理
- **種目別MAX記録**: 各運動の最高重量を自動追跡
- **記録更新通知**: 新記録達成時にバッジ表示
- **記録履歴**: 過去の記録推移を確認

### 2. 統計・分析機能

#### 2.1 統計ダッシュボード
- **月間トレーニング回数**: 月ごとの実施回数
- **総トレーニング時間**: 累計時間の表示
- **部位別トレーニング量**: 月間の部位別総負荷量（重量 × レップ数）を計算
- **総負荷量**: 累計トレーニング負荷の可視化
- **進捗グラフ**: 視覚的な成長曲線表示

#### 2.2 AIコーチング分析
- **Google Gemini 2.0 Flash統合**: 最新AIモデルによる分析
- **トレーニング分析レポート**: 
  - 筋肉部位のバランス評価
  - トレーニング頻度の適正判定
  - 過負荷・過少トレーニングの警告
  - 休養日の提案
- **成長予測**: 3ヶ月後の成長シミュレーション（筋力・筋量）
- **個別アドバイス**: パーソナライズされたトレーニング提案
- **メニュー提案**: 目標に応じた具体的なプログラム
- **分析履歴保存**: 過去のAI分析結果を保存・再確認

#### 2.3 身体測定記録
- **体重・体脂肪率記録**: 日次での測定記録
- **サイズ記録**: 胸囲、腕周り、ウエスト、太もも、ふくらはぎ
- **推移グラフ**: 各測定値の時系列変化を視覚化
- **目標設定**: 目標体重・体脂肪率の設定

### 3. ジム検索・情報管理

#### 3.1 ジム検索機能
- **GPS位置検索**: 現在地から半径5km以内のジムを自動検索
- **Google Places API統合**: リアルタイムのジム情報取得
- **地図表示**: Google Maps連携による視覚的な位置確認
- **絞り込み検索**: 評価、距離、設備で絞り込み

#### 3.2 ジム詳細情報
- **基本情報**: 名称、住所、電話番号、営業時間
- **評価・レビュー**: Google Placesの評価とレビュー数
- **写真**: ジム施設の写真表示
- **ルート案内**: Google Mapsでのナビゲーション
- **お気に入り登録**: よく行くジムをブックマーク

#### 3.3 混雑度管理システム

**📊 段階的データ戦略**（収益ベース）:

##### フェーズ1（現在稼働中）: 0 - 100万円/月
- **統計ベース推定**: 評価・レビュー数・時間帯から混雑度を推定（精度70-90%）
- **ユーザー報告**: 実際にジムを訪問したユーザーが混雑度を報告
- **コスト**: $0/月（完全無料）

##### フェーズ2（準備完了）: 100 - 300万円/月
- **ハイブリッド戦略**: 人気ジム（評価4.0以上、レビュー100件以上）のみGoogle Places APIを使用
- **その他ジム**: 統計推定+ユーザー報告
- **コスト**: $170/月
- **精度**: 85-95%

##### フェーズ3（準備完了）: 300万円/月以上
- **フルAPI導入**: 全ジムでGoogle Places API使用
- **リアルタイム更新**: 1時間ごとの自動更新
- **コスト**: $850/月
- **精度**: 90-95%

**混雑度レベル**:
- レベル1: 空いています（緑色）
- レベル2: やや空き（薄緑色）
- レベル3: 普通（黄色）
- レベル4: やや混雑（オレンジ色）
- レベル5: 超混雑（赤色）

**データソース優先順位**:
1. ユーザー報告（24時間有効）← 最優先
2. Firebaseキャッシュ（動的期限）
3. 統計推定値（Google Places APIデータから算出）

#### 3.4 パートナージム機能
- **パートナージム表示**: 提携ジムを優先表示
- **キャンペーン情報**: 入会金割引、初月無料などの特典表示
- **ビジター予約**: 提携ジム向けのビジター利用予約機能
- **施設情報詳細**: マシン台数、設備情報の充実

### 4. ソーシャル機能

#### 4.1 トレーニングパートナー検索
- **プロフィール作成**: 性別、年齢、トレーニング目標、経験レベル
- **条件検索**: 目標、レベル、活動地域でフィルタリング
- **マッチングリクエスト**: パートナー候補にリクエスト送信
- **チャット機能**: マッチング成立後のメッセージング

#### 4.2 SNS連携
- **トレーニング記録シェア**: 実績をX（Twitter）、Instagram、Facebookにシェア
- **カスタム画像生成**: トレーニング内容を視覚化したシェア画像自動生成
- **統計シェア**: 月間統計をSNSに投稿
- **成果共有**: パーソナルレコード達成を共有

### 5. ユーザー管理機能

#### 5.1 認証システム
- **メールアドレス認証**: Firebase Authentication統合
- **パスワードリセット**: メール経由でのパスワード再設定
- **セキュアログイン**: 業界標準の暗号化

#### 5.2 プロフィール管理
- **基本情報**: 名前、性別、生年月日、身長
- **トレーニング情報**: 経験年数、目標、頻度
- **プロフィール写真**: アップロード・変更機能

#### 5.3 目標設定
- **筋力目標**: 種目別の目標重量設定
- **体組成目標**: 目標体重、体脂肪率
- **進捗追跡**: 目標達成率の表示

### 6. 計算機能

#### 6.1 トレーニング計算機
- **1RM計算機**: レップ数と重量から最大挙上重量を推定
- **総負荷量計算**: ワークアウト全体の負荷量算出

#### 6.2 身体測定計算機
- **BMI計算**: 身長と体重からBMI算出
- **体脂肪率推定**: 複数の測定値から推定

### 7. 通知機能

#### 7.1 プッシュ通知
- **トレーニングリマインダー**: 設定した時間にトレーニング通知
- **パートナーリクエスト**: マッチングリクエスト受信通知
- **記録更新通知**: パーソナルレコード達成時の通知
- **キャンペーン通知**: パートナージムの新キャンペーン

#### 7.2 通知設定
- **カスタマイズ**: 各通知の有効/無効切り替え
- **時間設定**: リマインダーの時刻設定

### 8. データ管理

#### 8.1 データ保存
- **クラウド同期**: Firebase Firestoreによるリアルタイム同期
- **オフライン対応**: ネットワーク接続なしでも記録可能
- **自動バックアップ**: クラウドへの自動バックアップ

#### 8.2 データエクスポート
- **記録共有**: トレーニングデータの共有機能
- **統計エクスポート**: 画像形式での統計データ保存

---

## 💎 プラン価格と機能範囲

### 無料プラン（現在）

**月額料金**: ¥0

**利用可能機能**:
- ✅ トレーニング記録（制限なし）
- ✅ ワークアウト履歴（全期間）
- ✅ パーソナルレコード管理
- ✅ 基本統計（月間トレーニング回数、総時間）
- ✅ ジム検索（GPS検索、地図表示）
- ✅ 混雑度確認（ユーザー報告 + 統計推定）
- ✅ お気に入りジム登録
- ✅ 身体測定記録
- ✅ 基本計算機（1RM、BMI）
- ✅ プロフィール管理
- ✅ SNSシェア（基本）

**制限事項**:
- ⚠️ AIコーチング分析: 月3回まで
- ⚠️ トレーニングパートナー検索: 表示のみ
- ⚠️ 広告表示あり

---

### プレミアムプラン（予定）

**月額料金**: ¥980（予定価格）

**追加機能**:
- ✅ **AI無制限**: AIコーチング分析が無制限
- ✅ **成長予測**: 3ヶ月後のシミュレーション機能
- ✅ **詳細統計**: 部位別負荷量、進捗グラフ
- ✅ **パートナー機能フル解放**: マッチング・チャット無制限
- ✅ **広告非表示**: 全ての広告を非表示
- ✅ **優先サポート**: 問い合わせ優先対応
- ✅ **カスタムテンプレート**: 無制限保存

---

### プロプラン（予定）

**月額料金**: ¥1,980（予定価格）

**プレミアムプラン + 以下**:
- ✅ **リアルタイム混雑度**: フェーズ3（全ジムでGoogle API使用）
- ✅ **パーソナルトレーナー機能**: トレーナー向け会員管理
- ✅ **栄養管理**: 食事記録・カロリー計算
- ✅ **動画保存**: トレーニングフォーム動画保存
- ✅ **データエクスポート**: CSV形式でのデータダウンロード
- ✅ **API連携**: 他のフィットネスアプリとの連携

---

## 🚀 このアプリの強み

### 1. **混雑度可視化システム**

**業界初の段階的データ戦略**:
- **フェーズ1**: 統計推定（コスト$0） - 現在
- **フェーズ2**: ハイブリッド（コスト$170/月） - 収益100万円達成時
- **フェーズ3**: フルAPI（コスト$850/月） - 収益300万円達成時

**科学的根拠**:
- 国立体育・スポーツ大学論文データ
- PerfectGym、WOD Guru国際統計
- Google Places API技術

**コスト効率**:
- 初期費用ゼロで高品質データ提供
- 収益に応じた段階的投資
- ROI 400-500%の実績見込み

### 2. **最新AIコーチング**

**Google Gemini 2.0 Flash統合**:
- マルチモーダルAI分析
- パーソナライズされたアドバイス
- リアルタイム成長予測

**分析精度**:
- 筋肉バランス評価
- 過負荷検出
- 最適休養日提案

### 3. **詳細なトレーニング記録**

**セット種別管理**:
- ウォームアップセット（W）
- スーパーセット（SS）
- ドロップセット（D）
- 失敗セット（F）

**データの正確性**:
- 重量・レップ数の正確な記録
- 部位別負荷量の自動計算
- パーソナルレコード自動追跡

### 4. **リアルタイムジム検索**

**Google Places API統合**:
- 全国のジム情報を網羅
- リアルタイム評価・レビュー
- 正確な位置情報

**パートナージム優先表示**:
- 特別キャンペーン情報
- ビジター予約機能
- 詳細な設備情報

### 5. **包括的なデータ管理**

**クラウド同期**:
- Firebase Firestore使用
- リアルタイム同期
- 自動バックアップ

**オフライン対応**:
- ネットワーク接続不要で記録可能
- 自動同期

### 6. **ソーシャル機能**

**トレーニングパートナー検索**:
- 目標・レベル別マッチング
- チャット機能
- 安全なマッチングシステム

**SNS連携**:
- カスタム画像生成
- 実績シェア
- コミュニティ形成

---

## 📊 技術スタック

### フロントエンド
- **Flutter 3.35.4**: クロスプラットフォーム開発
- **Dart 3.9.2**: プログラミング言語
- **Material Design 3**: UIデザインシステム

### バックエンド
- **Firebase Firestore**: NoSQLデータベース
- **Firebase Authentication**: 認証システム
- **Firebase Storage**: ファイルストレージ

### 外部API
- **Google Places API**: ジム検索
- **Google Maps API**: 地図表示
- **Google Gemini 2.0 Flash**: AI分析

### 分析
- **Firestore Analytics**: データ分析基盤
- **カスタム統計エンジン**: 部位別負荷量計算

---

## 📱 対応プラットフォーム

### 現在対応
- ✅ **Webアプリ**: ブラウザで即座に利用可能
- ✅ **Android**: Google Play配信準備中

### 今後対応予定
- 🔄 **iOS**: App Store配信予定
- 🔄 **PWA**: プログレッシブWebアプリ化

---

## 🔒 セキュリティ

### データ保護
- **Firebase Authentication**: 業界標準の認証
- **SSL/TLS暗号化**: 全ての通信を暗号化
- **Firestore Security Rules**: データアクセス制御

### プライバシー
- **個人情報保護**: GDPR準拠
- **匿名化データ**: 統計分析は匿名化
- **ユーザー管理**: データ削除権

---

## 📈 今後の開発予定

### 短期（3ヶ月以内）
- [ ] プレミアムプラン実装
- [ ] Android APK配信開始
- [ ] 栄養管理機能追加
- [ ] フェーズ2移行（収益100万円達成時）

### 中期（6ヶ月以内）
- [ ] iOS版リリース
- [ ] パーソナルトレーナー機能
- [ ] 動画保存機能
- [ ] フェーズ3移行（収益300万円達成時）

### 長期（1年以内）
- [ ] ウェアラブルデバイス連携
- [ ] ジム内チェックイン機能
- [ ] グループトレーニング機能
- [ ] 大会情報・エントリー機能

---

## 📞 サポート

### 問い合わせ
- **GitHubリポジトリ**: https://github.com/aka209859-max/gym-tracker-flutter
- **技術仕様書**: リポジトリ内のドキュメント参照

### ドキュメント
- `CROWD_ESTIMATION_ALGORITHM.md`: 混雑度推定アルゴリズムの技術仕様
- `CROWD_DATA_STRATEGY.md`: 段階的データ戦略のロードマップ

---

## 📝 バージョン履歴

### v1.0.40（現在）
- ✅ 混雑度推定システム実装
- ✅ フェーズベース戦略実装
- ✅ AIコーチング機能（Gemini 2.0 Flash）
- ✅ トレーニングパートナー検索
- ✅ 詳細統計ダッシュボード
- ✅ パーソナルレコード管理
- ✅ セット種別管理（W/SS/D/F）
- ✅ カスタム種目作成
- ✅ SNSシェア機能

---

**最終更新**: 2025年11月20日  
**ドキュメントバージョン**: 1.0.0

