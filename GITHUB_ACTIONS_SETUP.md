# GitHub Actions ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

**GYM MATCH Androidç‰ˆã‚’ GitHub Actions ã§è‡ªå‹•ãƒ“ãƒ«ãƒ‰ã™ã‚‹æ–¹æ³•**

---

## ðŸŽ¯ æ¦‚è¦

ã“ã®ã‚¬ã‚¤ãƒ‰ã«å¾“ãˆã°ã€GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã ã‘ã§è‡ªå‹•çš„ã«Android APK/AABãŒãƒ“ãƒ«ãƒ‰ã•ã‚Œã¾ã™ã€‚

---

## ðŸ“‹ å‰ææ¡ä»¶

- âœ… GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- âœ… ãƒªãƒã‚¸ãƒˆãƒª: https://github.com/aka209859-max/gym-tracker-flutter-android
- âœ… `google-services.json` ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆFirebase Console ã‹ã‚‰å–å¾—ï¼‰

---

## ðŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ï¼ˆ5åˆ†ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: Firebaseè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—ï¼ˆ2åˆ†ï¼‰

#### 1-1. Firebase Console ã«ã‚¢ã‚¯ã‚»ã‚¹
```
https://console.firebase.google.com
```

#### 1-2. GYM MATCH ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠž

#### 1-3. Androidã‚¢ãƒ—ãƒªã®è¨­å®šç”»é¢ã¸
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šï¼ˆâš™ï¸ã‚¢ã‚¤ã‚³ãƒ³ï¼‰ â†’ **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š**
- **ãƒžã‚¤ã‚¢ãƒ—ãƒª** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ â†’ Android ã‚¢ãƒ—ãƒª
- Package name: `com.gymmatch.app`

#### 1-4. google-services.json ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- ç”»é¢ä¸‹éƒ¨ã® **google-services.json** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

---

### ã‚¹ãƒ†ãƒƒãƒ—2: GitHub Secrets ã«è¨­å®šï¼ˆ3åˆ†ï¼‰

#### 2-1. ãƒªãƒã‚¸ãƒˆãƒªã® Settings ã¸ç§»å‹•
```
https://github.com/aka209859-max/gym-tracker-flutter-android/settings
```

#### 2-2. Secrets and variables â†’ Actions ã‚’ã‚¯ãƒªãƒƒã‚¯

#### 2-3. New repository secret ã‚’ã‚¯ãƒªãƒƒã‚¯

#### 2-4. Secret ã‚’è¿½åŠ 

**Nameï¼ˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆåï¼‰:**
```
GOOGLE_SERVICES_JSON
```

**Secretï¼ˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆå€¤ï¼‰:**
```json
# google-services.json ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆ
# ä¾‹:
{
  "project_info": {
    "project_number": "123456789012",
    "project_id": "gym-match-e560d",
    "storage_bucket": "gym-match-e560d.appspot.com"
  },
  "client": [
    ...
  ]
}
```

**âš ï¸ é‡è¦**: 
- ãƒ•ã‚¡ã‚¤ãƒ«ã®**å…¨å†…å®¹**ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ï¼ˆæœ€åˆã®`{`ã‹ã‚‰æœ€å¾Œã®`}`ã¾ã§ï¼‰
- JSONå½¢å¼ã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„

#### 2-5. Add secret ã‚’ã‚¯ãƒªãƒƒã‚¯

---

## ðŸ”¨ ãƒ“ãƒ«ãƒ‰ã®å®Ÿè¡Œæ–¹æ³•

### æ–¹æ³•1: è‡ªå‹•å®Ÿè¡Œï¼ˆã‚³ãƒŸãƒƒãƒˆæ™‚ï¼‰

#### ãƒ‘ã‚¿ãƒ¼ãƒ³A: main ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥
```bash
git add .
git commit -m "feat: Update Android version"
git push origin main
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³B: Pull Request ä½œæˆ
```bash
# develop ãƒ–ãƒ©ãƒ³ãƒã§ä½œæ¥­
git checkout -b feature/new-feature
git add .
git commit -m "feat: Add new feature"
git push origin feature/new-feature

# GitHub ã§ Pull Request ä½œæˆ
```

### æ–¹æ³•2: æ‰‹å‹•å®Ÿè¡Œ

#### GitHub ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‹ã‚‰:
1. ãƒªãƒã‚¸ãƒˆãƒªã® **Actions** ã‚¿ãƒ–ã¸ç§»å‹•
2. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ **Android Build & Release** ã‚’é¸æŠž
3. å³ä¸Šã® **Run workflow** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. **Run workflow** ã‚’ç¢ºèª

---

## ðŸ“¥ ãƒ“ãƒ«ãƒ‰æˆæžœç‰©ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

### ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ‰‹é †:

1. **Actions ã‚¿ãƒ–**ã¸ç§»å‹•
   ```
   https://github.com/aka209859-max/gym-tracker-flutter-android/actions
   ```

2. æœ€æ–°ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã‚’ã‚¯ãƒªãƒƒã‚¯

3. **Summary** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«

4. **Artifacts** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ä»¥ä¸‹ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰:
   - ðŸ“± **gym-match-debug-apk** (ãƒ‡ãƒãƒƒã‚°ç‰ˆ - ãƒ†ã‚¹ãƒˆç”¨)
   - ðŸ“± **gym-match-release-apk** (ãƒªãƒªãƒ¼ã‚¹ç‰ˆ - é…å¸ƒç”¨)
   - ðŸ“¦ **gym-match-release-aab** (Google Play ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”¨)

---

## ðŸ“Š ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ç¢ºèª

### ãƒ“ãƒ«ãƒ‰ä¸­:
```
ðŸŸ¡ In Progress
```
- ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œä¸­ï¼ˆç´„5-10åˆ†ï¼‰

### ãƒ“ãƒ«ãƒ‰æˆåŠŸ:
```
âœ… Success
```
- APK/AABãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½

### ãƒ“ãƒ«ãƒ‰å¤±æ•—:
```
âŒ Failure
```
- ãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ã‚¨ãƒ©ãƒ¼åŽŸå› ã‚’ç‰¹å®š

---

## ðŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼1: `GOOGLE_SERVICES_JSON secret not set`

**åŽŸå› **: Firebaseè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒGitHub Secretsã«æœªç™»éŒ²

**è§£æ±ºç­–**:
1. [ã‚¹ãƒ†ãƒƒãƒ—2](#ã‚¹ãƒ†ãƒƒãƒ—2-github-secrets-ã«è¨­å®š3åˆ†) ã‚’å†ç¢ºèª
2. SecretåãŒæ­£ç¢ºã« `GOOGLE_SERVICES_JSON` ã‹ç¢ºèªï¼ˆå¤§æ–‡å­—å°æ–‡å­—ã‚‚ä¸€è‡´ï¼‰
3. JSONå†…å®¹ãŒå®Œå…¨ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

---

### ã‚¨ãƒ©ãƒ¼2: `Gradle build failed`

**åŽŸå› **: ãƒ“ãƒ«ãƒ‰è¨­å®šã®å•é¡Œ

**è§£æ±ºç­–**:
1. `android/app/build.gradle` ã®è¨­å®šã‚’ç¢ºèª
2. ãƒ­ã‚°ã§å…·ä½“çš„ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª
3. ä¾å­˜é–¢ä¿‚ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç«¶åˆã‚’ç¢ºèª

---

### ã‚¨ãƒ©ãƒ¼3: `Flutter version mismatch`

**åŽŸå› **: Flutter SDKãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ä¸ä¸€è‡´

**è§£æ±ºç­–**:
1. `.github/workflows/android-build.yml` ã® `FLUTTER_VERSION` ã‚’ç¢ºèª
2. `pubspec.yaml` ã® `sdk` ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ä¸€è‡´ã•ã›ã‚‹

---

## ðŸŽ¨ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º

### ãƒ“ãƒ«ãƒ‰æ¡ä»¶ã‚’å¤‰æ›´:

```yaml
# mainãƒ–ãƒ©ãƒ³ãƒã®ã¿ã§ãƒ“ãƒ«ãƒ‰
on:
  push:
    branches: [ main ]

# ã‚¿ã‚°ä½œæˆæ™‚ã®ã¿ãƒ“ãƒ«ãƒ‰
on:
  push:
    tags:
      - 'v*.*.*'

# æ¯Žæ—¥å®šæœŸãƒ“ãƒ«ãƒ‰
on:
  schedule:
    - cron: '0 0 * * *'  # æ¯Žæ—¥0æ™‚ï¼ˆUTCï¼‰
```

### Flutter ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰æ›´:

```yaml
env:
  FLUTTER_VERSION: '3.35.4'  # â† ã“ã“ã‚’å¤‰æ›´
```

---

## ðŸ“± ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸAPKã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

### Windows PC ã®å ´åˆ:

#### æ–¹æ³•1: USBã‚±ãƒ¼ãƒ–ãƒ«çµŒç”±ï¼ˆæŽ¨å¥¨ï¼‰

1. **Androidå®Ÿæ©Ÿã®è¨­å®š**
   - è¨­å®š â†’ ãƒ‡ãƒã‚¤ã‚¹æƒ…å ± â†’ ãƒ“ãƒ«ãƒ‰ç•ªå·ã‚’7å›žã‚¿ãƒƒãƒ— â†’ é–‹ç™ºè€…å‘ã‘ã‚ªãƒ—ã‚·ãƒ§ãƒ³æœ‰åŠ¹åŒ–
   - è¨­å®š â†’ é–‹ç™ºè€…å‘ã‘ã‚ªãƒ—ã‚·ãƒ§ãƒ³ â†’ USBãƒ‡ãƒãƒƒã‚° ON

2. **APKã‚’å®Ÿæ©Ÿã«è»¢é€**
   ```powershell
   # Android SDK Platform-Tools ã‚’ä½¿ç”¨
   adb install gym-match-debug-apk.apk
   ```

#### æ–¹æ³•2: ãƒ¡ãƒ¼ãƒ«/ã‚¯ãƒ©ã‚¦ãƒ‰çµŒç”±

1. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸAPKã‚’Googleãƒ‰ãƒ©ã‚¤ãƒ–ç­‰ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
2. å®Ÿæ©Ÿã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
3. ãƒ•ã‚¡ã‚¤ãƒ«ãƒžãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‹ã‚‰APKã‚’é–‹ã„ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
4. ã€Œæä¾›å…ƒä¸æ˜Žã®ã‚¢ãƒ—ãƒªã€ã‚’è¨±å¯

---

## ðŸ” ãƒªãƒªãƒ¼ã‚¹ç½²åã®è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹ç”¨ã«ç½²åéµã‚’è¿½åŠ ã™ã‚‹å ´åˆ:

### 1. ç½²åéµã‚’ç”Ÿæˆï¼ˆWindowsï¼‰

```powershell
keytool -genkey -v `
  -storetype PKCS12 `
  -keystore gym-match-release-key.jks `
  -keyalg RSA `
  -keysize 2048 `
  -validity 10000 `
  -alias gym-match-release
```

### 2. ç½²åéµæƒ…å ±ã‚’ GitHub Secrets ã«è¿½åŠ 

**å¿…è¦ãªSecrets:**
- `KEYSTORE_FILE` (Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ãŸ.jksãƒ•ã‚¡ã‚¤ãƒ«)
- `KEYSTORE_PASSWORD`
- `KEY_ALIAS`
- `KEY_PASSWORD`

### 3. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ç½²åã‚¹ãƒ†ãƒƒãƒ—ã‚’è¿½åŠ 

```yaml
- name: ðŸ” Setup Signing
  run: |
    echo "${{ secrets.KEYSTORE_FILE }}" | base64 -d > android/app/release-key.jks
    cat > android/key.properties << EOF
    storePassword=${{ secrets.KEYSTORE_PASSWORD }}
    keyPassword=${{ secrets.KEY_PASSWORD }}
    keyAlias=${{ secrets.KEY_ALIAS }}
    storeFile=release-key.jks
    EOF
```

---

## ðŸ“ˆ ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æ´»ç”¨ï¼ˆæ—¢ã«è¨­å®šæ¸ˆã¿ï¼‰

```yaml
- name: â˜• Setup Java
  uses: actions/setup-java@v4
  with:
    cache: 'gradle'  # â† Gradleã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹

- name: ðŸ¦ Setup Flutter
  uses: subosito/flutter-action@v2
  with:
    cache: true  # â† Flutterã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹
```

**åŠ¹æžœ**: ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒç´„50%çŸ­ç¸®

---

## ðŸŽ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### âœ… å®Œäº†ã—ãŸã‚‰:
1. ã‚³ãƒ¼ãƒ‰ã‚’ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª
2. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸAPKã‚’å®Ÿæ©Ÿã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
3. 3ã¤ã®ä¸»è¦æ©Ÿèƒ½ã‚’æ¤œè¨¼:
   - âœ… PRè¨˜éŒ²ç”»é¢ã®éƒ¨ä½åˆ¥è¡¨ç¤º
   - âœ… æœªå®Œäº†ã‚»ãƒƒãƒˆã®PRåæ˜ 
   - âœ… æœ‰é…¸ç´ é‹å‹•ã®å…¥åŠ›è¡¨ç¤º

### ðŸš€ æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹æº–å‚™:
1. ãƒªãƒªãƒ¼ã‚¹ç½²åã®è¿½åŠ 
2. Google Play Console ã§ã‚¢ãƒ—ãƒªç™»éŒ²
3. AABãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

---

## ðŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Android Build Verification Report](./ANDROID_BUILD_VERIFICATION_REPORT.md)
- [Quick Start Guide](./QUICK_START_GUIDE.md)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)

---

## ðŸ’¬ ã‚µãƒãƒ¼ãƒˆ

ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ:

1. **Actions ã‚¿ãƒ–**ã§ãƒ­ã‚°ã‚’ç¢ºèª
2. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚³ãƒ”ãƒ¼
3. ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèª

---

**ä½œæˆæ—¥**: 2025-12-16  
**å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.0.254+279  
**æ›´æ–°å±¥æ­´**: åˆç‰ˆä½œæˆ
